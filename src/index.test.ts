
import { deriveNewValueAndCursorPosition } from './'

test('deriveNewValueAndCursorPosition', () => {
  expect(deriveNewValueAndCursorPosition('1,99', 0, 0, '1')).toEqual([1199, 1])
  expect(deriveNewValueAndCursorPosition('1,99', 1, 1, '2')).toEqual([1299, 3])
  expect(deriveNewValueAndCursorPosition('1,99', 2, 2, '3')).toEqual([1399, 3])
  expect(deriveNewValueAndCursorPosition('1,99', 3, 3, '4')).toEqual([1949, 4])
  expect(deriveNewValueAndCursorPosition('1,99', 4, 4, '5')).toEqual([1995, 5])

  expect(deriveNewValueAndCursorPosition('1.234,56', 0, 0, '9')).toEqual([9123456, 1])
  expect(deriveNewValueAndCursorPosition('1.234,56', 1, 1, '9')).toEqual([1923456, 3])
  expect(deriveNewValueAndCursorPosition('1.234,56', 2, 2, '9')).toEqual([1923456, 3])
  expect(deriveNewValueAndCursorPosition('1.234,56', 3, 3, '9')).toEqual([1293456, 4])
  expect(deriveNewValueAndCursorPosition('1.234,56', 4, 4, '9')).toEqual([1239456, 5])
  expect(deriveNewValueAndCursorPosition('1.234,56', 5, 5, '9')).toEqual([1234956, 7])
  expect(deriveNewValueAndCursorPosition('1.234,56', 6, 6, '9')).toEqual([1234956, 7])
  expect(deriveNewValueAndCursorPosition('1.234,56', 7, 7, '9')).toEqual([1234596, 8])
  expect(deriveNewValueAndCursorPosition('1.234,56', 8, 8, '9')).toEqual([1234569, 9])

  expect(deriveNewValueAndCursorPosition('1.234,56', 0, 8, '9')).toEqual([9, 4])

  expect(deriveNewValueAndCursorPosition('1.234,56', 0, 0, 'Delete')).toEqual([23456, 0])
  expect(deriveNewValueAndCursorPosition('1.234,56', 1, 1, 'Delete')).toEqual([13456, 1])
  expect(deriveNewValueAndCursorPosition('1.234,56', 2, 2, 'Delete')).toEqual([13456, 1])
  expect(deriveNewValueAndCursorPosition('1.234,56', 3, 3, 'Delete')).toEqual([12456, 2])
  expect(deriveNewValueAndCursorPosition('1.234,56', 4, 4, 'Delete')).toEqual([12356, 3])
  expect(deriveNewValueAndCursorPosition('1.234,56', 5, 5, 'Delete')).toEqual([12346, 5])
  expect(deriveNewValueAndCursorPosition('1.234,56', 6, 6, 'Delete')).toEqual([12346, 5])
  expect(deriveNewValueAndCursorPosition('1.234,56', 7, 7, 'Delete')).toEqual([12345, 6])
  expect(deriveNewValueAndCursorPosition('1.234,56', 8, 8, 'Delete')).toEqual([123456, 8])

  expect(deriveNewValueAndCursorPosition('1.234,56', 0, 1, 'Delete')).toEqual([23456, 0])
  expect(deriveNewValueAndCursorPosition('1.234,56', 1, 2, 'Delete')).toEqual([123456, 2])
  expect(deriveNewValueAndCursorPosition('1.234,56', 1, 3, 'Delete')).toEqual([13456, 1])
  expect(deriveNewValueAndCursorPosition('1.234,56', 1, 4, 'Delete')).toEqual([1456, 1])
  expect(deriveNewValueAndCursorPosition('1.234,56', 1, 5, 'Delete')).toEqual([156, 2])
  expect(deriveNewValueAndCursorPosition('1.234,56', 1, 6, 'Delete')).toEqual([156, 2])
  expect(deriveNewValueAndCursorPosition('1.234,56', 1, 7, 'Delete')).toEqual([16, 3])
  expect(deriveNewValueAndCursorPosition('1.234,56', 1, 8, 'Delete')).toEqual([1, 4])
  expect(deriveNewValueAndCursorPosition('1.234,56', 5, 6, 'Delete')).toEqual([123456, 6])

  expect(deriveNewValueAndCursorPosition('1.234,56', 0, 0, 'Backspace')).toEqual([123456, 0])
  expect(deriveNewValueAndCursorPosition('1.234,56', 1, 1, 'Backspace')).toEqual([23456, 0])
  expect(deriveNewValueAndCursorPosition('1.234,56', 2, 2, 'Backspace')).toEqual([23456, 0])
  expect(deriveNewValueAndCursorPosition('1.234,56', 3, 3, 'Backspace')).toEqual([13456, 1])
  expect(deriveNewValueAndCursorPosition('1.234,56', 4, 4, 'Backspace')).toEqual([12456, 2])
  expect(deriveNewValueAndCursorPosition('1.234,56', 5, 5, 'Backspace')).toEqual([12356, 4])
  expect(deriveNewValueAndCursorPosition('1.234,56', 6, 6, 'Backspace')).toEqual([12356, 4])
  expect(deriveNewValueAndCursorPosition('1.234,56', 7, 7, 'Backspace')).toEqual([12346, 5])
  expect(deriveNewValueAndCursorPosition('1.234,56', 8, 8, 'Backspace')).toEqual([12345, 6])

  expect(deriveNewValueAndCursorPosition('1.234,56', 1, 2, 'Backspace')).toEqual([123456, 2])
  expect(deriveNewValueAndCursorPosition('1.234,56', 5, 6, 'Backspace')).toEqual([123456, 6])
  expect(deriveNewValueAndCursorPosition('1.234,56', 1, 1, 'Backspace')).toEqual([23456, 0])
  expect(deriveNewValueAndCursorPosition('1.234,56', 2, 2, 'Backspace')).toEqual([23456, 0])
  expect(deriveNewValueAndCursorPosition('1.234,56', 5, 5, 'Backspace')).toEqual([12356, 4])
  expect(deriveNewValueAndCursorPosition('1.234,56', 6, 6, 'Backspace')).toEqual([12356, 4])
})
